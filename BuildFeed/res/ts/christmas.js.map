{"version":3,"sources":["christmas.ts"],"names":["BuildFeed","Christmas","deferAnimate","window","requestAnimationFrame","animate","counter","i","newSnow","Snowflake","snow","push","snowContainer","appendChild","getElement","flake","bumpElement","splice","indexOf","movementSpeed","[object Object]","this","element","moveX","localSpeed","Math","round","random","top","innerHeight","remove","left","innerWidth","style","transform","document","createElement","Setup","className","match","navigator","userAgent","parseInt","body","setInterval","addEventListener"],"mappings":"AAAA,aAEA,IAAOA,WAAP,SAAOA,IAAU,SAAAC,GAwDb,SAAAC,IAEIC,OAAOC,sBAAsBC,GAGjC,SAAAA,IAEI,GAAIC,EAAU,GAAM,EAEhB,IAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACvB,CACI,MAAMC,EAAU,IAAIC,EACpBC,EAAKC,KAAKH,GACVI,EAAcC,YAAYL,EAAQM,cAI1C,IAAK,MAAMC,KAASL,EACpB,CACmBK,EAAMC,aAAY,IAI7BN,EAAKO,OAAOP,EAAKQ,QAAQH,GAAQ,GAIzCT,IAjFJ,MAAMa,EAAgB,EAEtB,IAAIP,EACAF,KACAJ,EAAkB,QAGtBG,EAMWW,aAEH,OAAOC,KAAKC,QAGTF,YAAYG,GAEf,IAAIC,EAAaC,KAAKC,OAAQD,KAAKE,SAAW,EAAK,IAAOR,GAE1D,OADAE,KAAKO,IAAMP,KAAKO,IAAMJ,EAClBH,KAAKO,KAAO,IAAMP,KAAKO,IAAOzB,OAAO0B,YAAc,IAEnDR,KAAKC,QAAQQ,UACN,GAGPP,IAEAC,EAAaC,KAAKC,OAAQD,KAAKE,SAAW,EAAK,IAAOR,GACtDE,KAAKU,KAAON,KAAKE,SAAW,GACtBN,KAAKU,KAAOP,EACZH,KAAKU,KAAOP,EAEdH,KAAKU,MAAQ,IAAMV,KAAKU,KAAQ5B,OAAO6B,WAAa,KAEpDX,KAAKC,QAAQQ,UACN,IAIfT,KAAKC,QAAQW,MAAMC,uBAAyBb,KAAKU,WAAWV,KAAKO,UAC1D,GAGXR,cAEIC,KAAKC,QAAUa,SAASC,cAAc,OACtCf,KAAKO,IAAM,EACXP,KAAKU,KAAON,KAAKC,MAAMD,KAAKE,SAAWxB,OAAO6B,cApDzChC,EAAAC,YAAAD,EAAAC,eAsFGoC,MAAhB,YAEIzB,EAAgBuB,SAASC,cAAc,QACzBE,UAAY,iBAE1B,MAAMC,EAAQpC,OAAOqC,UAAUC,UAAUF,MAAM,wBACnCA,EAAQG,SAASH,EAAM,IAAM,IAE9B,KAGP3B,EAAc0B,WAAa,2BAG/BH,SAASQ,KAAK9B,YAAYD,GAE1BT,OAAOC,sBAAsBC,GAC7BuC,YAAY1C,EAAc,MAvGjB,GAAjB,CAAOF,YAAAA,eA2GPG,OAAO0C,iBAAiB,OAAQ7C,UAAUC,UAAUoC","file":"christmas.js","sourcesContent":["\"use script\";\r\n\r\nmodule BuildFeed.Christmas\r\n{\r\n    const movementSpeed = 5;\r\n\r\n    let snowContainer: HTMLDivElement;\r\n    let snow: Array<Snowflake> = [];\r\n    let counter: number = 0;\r\n    let tick: number = 0;\r\n\r\n    class Snowflake\r\n    {\r\n        private readonly element: HTMLDivElement;\r\n        private top: number;\r\n        private left: number;\r\n\r\n        public getElement()\r\n        {\r\n            return this.element;\r\n        }\r\n\r\n        public bumpElement(moveX: boolean)\r\n        {\r\n            let localSpeed = Math.round(((Math.random() / 2) + 0.5) * movementSpeed);\r\n            this.top = this.top + localSpeed;\r\n            if (this.top < -10 || this.top > (window.innerHeight + 10))\r\n            {\r\n                this.element.remove();\r\n                return true;\r\n            }\r\n\r\n            if (moveX)\r\n            {\r\n                localSpeed = Math.round(((Math.random() / 2) + 0.5) * movementSpeed);\r\n                this.left = Math.random() > 0.5\r\n                    ? this.left + localSpeed\r\n                    : this.left - localSpeed;\r\n\r\n                if (this.left < -10 || this.left > (window.innerWidth + 10))\r\n                {\r\n                    this.element.remove();\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            this.element.style.transform = `translate(${this.left}px, ${this.top}px)`;\r\n            return false;\r\n        }\r\n\r\n        constructor()\r\n        {\r\n            this.element = document.createElement(\"div\");\r\n            this.top = 0;\r\n            this.left = Math.round(Math.random() * window.innerWidth);\r\n        }\r\n    }\r\n\r\n    function deferAnimate()\r\n    {\r\n        window.requestAnimationFrame(animate);\r\n    }\r\n\r\n    function animate()\r\n    {\r\n        if (counter % 5 === 0)\r\n        {\r\n            for (let i = 0; i < 2; i++)\r\n            {\r\n                const newSnow = new Snowflake();\r\n                snow.push(newSnow);\r\n                snowContainer.appendChild(newSnow.getElement());\r\n            }\r\n        }\r\n\r\n        for (const flake of snow)\r\n        {\r\n            const result = flake.bumpElement(true);\r\n\r\n            if (result)\r\n            {\r\n                snow.splice(snow.indexOf(flake), 1);\r\n            }\r\n        }\r\n\r\n        counter++;\r\n    }\r\n\r\n    export function Setup()\r\n    {\r\n        snowContainer = document.createElement(\"div\");\r\n        snowContainer.className = \"snow-container\";\r\n\r\n        const match = window.navigator.userAgent.match(/Firefox\\/([0-9]+)\\./);\r\n        const ver = match ? parseInt(match[1]) : 0;\r\n\r\n        if (ver >= 57)\r\n        {\r\n            // workaround shitty firefox quantum\r\n            snowContainer.className += \" quantum-snow-container\";\r\n        }\r\n\r\n        document.body.appendChild(snowContainer);\r\n\r\n        window.requestAnimationFrame(animate);\r\n        setInterval(deferAnimate, 125);\r\n    }\r\n}\r\n\r\nwindow.addEventListener(\"load\", BuildFeed.Christmas.Setup);"]}